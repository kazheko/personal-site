{{- /* Shared head include with Tailwind pipeline and page-level CSS hook */ -}}
{{- $inter400 := resources.Get "fonts/Inter-400.woff2" | resources.Copy "fonts/Inter-400.woff2" -}}
{{- $inter500 := resources.Get "fonts/Inter-500.woff2" | resources.Copy "fonts/Inter-500.woff2" -}}
{{- $inter600 := resources.Get "fonts/Inter-600.woff2" | resources.Copy "fonts/Inter-600.woff2" -}}
{{- $inter700 := resources.Get "fonts/Inter-700.woff2" | resources.Copy "fonts/Inter-700.woff2" -}}
{{- $jetbrains400 := resources.Get "fonts/JetBrainsMono-400.woff2" | resources.Copy "fonts/JetBrainsMono-400.woff2" -}}
{{- $pageTitle := site.Title -}}
{{- if and .Title (ne .Title site.Title) (not .IsHome) -}}
  {{- $pageTitle = printf "%s | %s" .Title site.Title -}}
{{- end -}}
{{- $postcssOpts := dict "config" "postcss.config.js" -}}
{{- $css := resources.Get "css/tailwind.css" | postCSS $postcssOpts -}}
{{- if hugo.IsProduction -}}
  {{- $css = $css | minify | resources.Fingerprint "sha256" -}}
{{- end -}}
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ $pageTitle }}</title>
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.meta.description }}{{ end }}">
  {{- if eq (hugo.Environment) "development" -}}
    <meta name="robots" content="noindex, nofollow">
  {{- end -}}
  {{ partial "seo-meta.html" . }}
  {{- $rssURL := "/index.xml" -}}
  {{- $rssTitle := .Site.Title -}}
  {{- if and (eq .Section "blog") .IsSection -}}
    {{- $rssURL = "/blog/index.xml" -}}
  {{- else if eq .Type "tags" -}}
    {{- $rssURL = printf "/tags/%s/index.xml" .Title -}}
    {{- $rssTitle = printf "%s - %s" .Title .Site.Title -}}
  {{- end -}}
  {{- $rss := $rssURL | absURL -}}
  <link rel="alternate" type="application/rss+xml" title="{{ $rssTitle }}" href="{{ $rss }}">
  <link rel="stylesheet" href="{{ $css.RelPermalink }}"{{ if hugo.IsProduction }} integrity="{{ $css.Data.Integrity }}"{{ end }}>
  {{ partial "pagination-meta.html" . }}
  {{ block "page_css" . }}{{ end }}
</head>
